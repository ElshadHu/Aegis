/* ── Tab bar ── */
.tab-bar {
  display: flex; gap: 8px; padding: 8px 16px;
  background: var(--bg); flex-shrink: 0; transition: background 0.3s;
}
.tab-pill {
  padding: 8px 20px; border: none; border-bottom: 3px solid transparent;
  border-radius: 14px 14px 4px 4px;
  font-family: 'Plus Jakarta Sans', sans-serif; font-size: 10px; font-weight: 700;
  letter-spacing: 1.5px; color: var(--text-dim); cursor: pointer; background: var(--bg);
  box-shadow: 4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light);
  transition: all 250ms ease-out;
}
.tab-pill:hover { color: var(--accent); transform: translateY(-1px); }
.tab-pill.active { color: var(--accent); border-bottom-color: var(--accent); box-shadow: 4px 4px 8px var(--shadow-dark), -4px -4px 8px var(--shadow-light); }
.tab-view { display: none; flex: 1; flex-direction: column; min-height: 0; }
.tab-view.active { display: flex; }

/* ── ACTIVITY tab ── */
.activity-filter-bar { display: flex; gap: 8px; padding: 8px 0; flex-shrink: 0; flex-wrap: wrap; align-items: center; }
.activity-filter-bar select {
  font-family: 'DM Sans', sans-serif; font-size: 11px; padding: 6px 12px;
  border: none; border-radius: 12px; background: var(--bg-card); color: var(--text-mid);
  box-shadow: inset 3px 3px 6px var(--shadow-dark-subtle), inset -3px -3px 6px var(--shadow-light-subtle);
  outline: none; cursor: pointer; appearance: auto;
}
.full-activity-feed {
  flex: 1; overflow-y: auto; background: var(--bg-inset); border-radius: 10px; padding: 6px;
  box-shadow: inset 3px 3px 6px var(--shadow-dark-subtle), inset -3px -3px 6px var(--shadow-light-subtle);
  display: flex; flex-direction: column; gap: 1px;
}

/* ── RULES tab ── */
.rules-container { flex: 1; overflow-y: auto; padding: 16px; }
.rules-header { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; flex-wrap: wrap; }
.rules-header h2 { margin-bottom: 0; }
.rules-actions { display: flex; gap: 8px; margin-top: 16px; }
.rules-presets { display: flex; align-items: center; gap: 8px; margin-bottom: 16px; flex-wrap: wrap; }
.rules-presets-label { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 10px; font-weight: 700; letter-spacing: 1.5px; color: var(--text-muted); }
.btn-preset {
  font-family: 'Plus Jakarta Sans', sans-serif; font-size: 9px; font-weight: 700;
  letter-spacing: 1px; padding: 5px 14px; border: none; border-radius: 12px;
  cursor: pointer; background: var(--bg-card); color: var(--text-dim);
  box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
  transition: all 250ms ease-out;
}
.btn-preset:hover { transform: translateY(-1px); color: var(--accent); box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light); }
.btn-preset.active { color: #fff; background: var(--accent); box-shadow: inset 2px 2px 4px rgba(0,0,0,0.15), inset -2px -2px 4px rgba(255,255,255,0.1); }

/* ── REPORTS tab ── */
.reports-container { flex: 1; overflow-y: auto; padding: 16px; }
.reports-stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 24px; }
.report-stat-card {
  text-align: center; padding: 16px 12px;
  background: linear-gradient(145deg, var(--bg-card), var(--bg-inset)); border-radius: 14px;
  box-shadow: 5px 5px 12px var(--shadow-dark), -5px -5px 12px var(--shadow-light);
}
.report-stat-value { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 24px; font-weight: 800; color: var(--accent); line-height: 1.2; letter-spacing: -0.02em; }
.report-stat-label { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 9px; font-weight: 700; letter-spacing: 1.5px; color: var(--text-dim); margin-top: 4px; text-transform: uppercase; }
.reports-section-title { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-muted); margin-bottom: 12px; }
.reports-export-grid { display: flex; gap: 10px; margin-bottom: 24px; flex-wrap: wrap; }
.reports-placeholder {
  text-align: center; padding: 32px 20px; color: var(--text-dim); font-size: 12px;
  background: var(--bg-card); border-radius: 14px;
  box-shadow: inset 3px 3px 6px var(--shadow-dark-subtle), inset -3px -3px 6px var(--shadow-light-subtle);
}
.reports-table-wrap {
  background: var(--bg-inset); border-radius: 14px; padding: 8px; overflow-x: auto;
  box-shadow: inset 3px 3px 6px var(--shadow-dark-subtle), inset -3px -3px 6px var(--shadow-light-subtle);
}
.reports-table { width: 100%; border-collapse: collapse; font-size: 12px; }
.reports-table th { text-align: left; padding: 8px 12px; font-family: 'Plus Jakarta Sans', sans-serif; font-size: 10px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; color: var(--text-muted); border-bottom: 1px solid var(--border); }
.reports-table td { padding: 6px 12px; color: var(--text-mid); font-family: 'DM Sans', sans-serif; }
.reports-table tr:nth-child(even) { background: rgba(140, 155, 175, 0.08); }
.reports-table tr:hover td { background: rgba(140, 155, 175, 0.14); }

/* ── Permissions grid (rules tab) ── */
.perm-grid-container {
  background: var(--bg-inset); border-radius: 14px; padding: 10px 12px;
  max-height: 300px; overflow-y: auto;
  box-shadow: inset 3px 3px 6px var(--shadow-dark-subtle), inset -3px -3px 6px var(--shadow-light-subtle);
}
.perm-grid-header { display: grid; grid-template-columns: 1fr repeat(6, 38px); gap: 4px; padding: 4px 6px; margin-bottom: 6px; }
.perm-grid-header span { font-family: 'Plus Jakarta Sans', sans-serif; font-size: 8px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase; color: var(--text-muted); text-align: center; }
.perm-grid-header span:first-child { text-align: left; }
.perm-grid-row { display: grid; grid-template-columns: 1fr repeat(6, 38px); gap: 4px; padding: 5px 6px; border-radius: 10px; align-items: center; }
.perm-grid-row:nth-child(even) { background: rgba(140, 155, 175, 0.08); }
.perm-grid-agent { font-size: 11px; font-weight: 600; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.perm-tristate {
  width: 32px; height: 24px; border: none; border-radius: 8px; cursor: pointer;
  font-family: 'Plus Jakarta Sans', sans-serif; font-size: 10px; font-weight: 800;
  letter-spacing: 0; transition: all 200ms ease-out;
  display: flex; align-items: center; justify-content: center; padding: 0;
}
.perm-tristate-inline {
  width: 64px; height: 24px; border: none; border-radius: 8px; cursor: pointer;
  font-family: 'DM Sans', sans-serif; font-size: 9px; font-weight: 700;
  letter-spacing: 0.5px; transition: all 200ms ease-out;
  display: flex; align-items: center; justify-content: center; padding: 0;
}
.perm-state-allow   { color: #fff; background: #43B581; box-shadow: 2px 2px 4px var(--shadow-dark), -2px -2px 4px var(--shadow-light-subtle); }
.perm-state-monitor { color: #fff; background: #E8913A; box-shadow: 2px 2px 4px var(--shadow-dark), -2px -2px 4px var(--shadow-light-subtle); }
.perm-state-block   { color: #fff; background: #DC3545; box-shadow: 2px 2px 4px var(--shadow-dark), -2px -2px 4px var(--shadow-light-subtle); }
.perm-tristate:hover, .perm-tristate-inline:hover { transform: translateY(-1px); box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light); }
.perm-legend { font-size: 9px; font-weight: 400; color: var(--text-muted); margin-left: 4px; }
.perm-legend-dot { display: inline-block; width: 8px; height: 8px; border-radius: 3px; margin: 0 2px 0 6px; vertical-align: middle; }
.perm-legend-dot.dot-allow   { background: #43B581; }
.perm-legend-dot.dot-monitor { background: #E8913A; }
.perm-legend-dot.dot-block   { background: #DC3545; }
.feed-entry.denied { border-left: 3px solid #DC3545; background: rgba(220, 53, 69, 0.07); }
.feed-entry.denied:nth-child(even) { background: rgba(220, 53, 69, 0.09); }
.feed-entry.denied .feed-action { color: var(--red); font-weight: 700; }
.denied-tag {
  font-size: 9px; font-weight: 700; letter-spacing: 1px; color: #fff;
  background: #DC3545; padding: 1px 8px; border-radius: 8px;
  flex-shrink: 0; white-space: nowrap; animation: denied-pulse 1.5s ease-in-out 2;
}
@keyframes denied-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
.perm-card-grid { display: flex; flex-direction: column; gap: 6px; padding: 4px 0; }
.perm-card-row { display: flex; align-items: center; gap: 8px; }
.perm-card-label { font-size: 11px; color: var(--text-mid); flex: 1; min-width: 0; }
.perm-card-desc { font-size: 9px; color: var(--text-muted); display: block; }
#perm-reset-defaults { margin-top: 10px; color: var(--text-dim); font-size: 9px; }
#perm-reset-defaults:hover { color: var(--red); }
